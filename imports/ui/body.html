<body>
	<div class="page-header container" style="background: lightgrey">
		  <h1>Codemap</h1>
			<p>User: {{> loginButtons}}</p>
  </div>
	{{#if currentUser}}
		<div class="container">
      {{> upload}}
      <br/>
			{{> buttons}}
      {{> export}}
		</div>
		<div class="container">
  		<hr/>
  		{{> bigtable}}
		</div>
	{{/if}}
</body>

<!-- HERE BE TEMPLATES -->

<template name='upload'>
  <div class="container">
    <h4>Upload 2-column CSV with rows:  "Source_Code" and "Source_Desc"</h4>
    
    {{#unless uploading}}
      <form class='upload' method="POST" enctype='multipart/form-data'>
        <input type='file' name="uploadCSV">
      </form>
    {{else}}
      <p><i class = 'fa fa-spin fa-refresh'></i> Uploading files...</p>
    {{/unless}}
  </div>
</template>

<template name='resultsdisplay'>
	<ul>
		{{#each results}}
			{{#each data}}
				<li>{{name}}</li>
			{{/each}}
		{{/each}}
	</ul>
</template>

<template name='searchBox'>
For future use
</template>

<template name="bigtable">
  <div height='300' Style="overflow: auto">
	  <table class="table table-hover">
    <thead>
      <tr>
        <th>Source Code</th>
        <th>Source Desc</th>
        <th>Target Code</th>
        <th>Target Desc</th>
        <th><button class='btn btn-warning saveallbutton'>Save ALL?</button></th>      
        <th class='bg-info'>Result Code</th>
        <th class='bg-info'>Result Desc</th>
      </tr>
    </thead>
    <tbody>
	    {{#each codes}}
	      <tr class = 'coderow'>
	        <td class="col-12">{{Source_Code}}</td>
	        <td class="col-12 col-md-auto">{{Source_Desc}}</td>
	        <td class="col-12">{{Target_Code}}</td>
	        <td class="col-12 col-md-auto">{{Target_Desc}}</td>
          <td class='col float-right' style='width: 250px'>
            <div class='btn-group'>
              <button class='btn btn-primary saveButton'>Save</button>
              <button class='btn btn-primary editButton'>Edit</button>
              <button class='btn btn-warning removeButton'>Remove</button>
            </div>
          </td>  
          <td class="col-12 bg-info" >{{Result_Code}}</td>
          <td class="col-12 col-md-auto bg-info">{{Result_Desc}}</td>

	      </tr>
		{{/each}}
    </tbody>
  </table>
  </div>
  </template>
  
  <template name = "buttons">
    <div class='row'>
      <div class="col-md-8">
        <form class='UMLS-button'>
          <label>Select Code Target:</label>
          <select name='UMLSTarget'>
           <option selected value=''>All Sources</option>
              <option value="SNOMEDCT_US">US SNOMEDCT</option>
              <option value="ICD10">ICD-10</option>
              <option value="ICD9">ICD-9</option>
              <option value="LNC">LOINC</option>
              <option value="RXNORM">RxNorm</option>
              <option value="CPT">CPT</option>
          </select>
        	<input type="submit" class="btn btn-primary" value="Search UMLS"/>   
        </form>
      </div>
      <div class="pull-right">
        <form class='ResetDB-button'>
          <input type="submit" class="btn btn-warning" value="Reset DB"/>
        </form>
        <form class='magic-button'>
          <input type="submit" class="btn btn-warning" value="Magic"/>
        </form>
      </div>
    </div>
  </template>

<template name="export">
  <button class="export-data btn btn-success" data-loading-text="Exporting...">Export Data</button>
</template>